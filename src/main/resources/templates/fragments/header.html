<!-- Frammento Header -->
<header class="site-header" th:fragment="siteHeader">
    <div class="container d-flex align-items-center justify-content-between">
        <!-- Brand -->
        <a class="brand d-flex align-items-center" th:href="@{/}">
            <img class="brand-logo" src="/img/logo/logo-cata.png" th:src="@{/img/logo/logo-cata.png}" alt="SIW Catalogo"
                width="200" height="50" style="height:50px;width:auto;">
        </a>

        <!-- Azioni: forzate in riga -->
        <!-- Azioni: affiancate -->
        <nav class="d-flex align-items-center"
            style="display:flex;flex-direction:row;align-items:center;gap:10px;white-space:nowrap;">

            <!-- Solo ADMIN -->
            <a class="btn btn-outline-brown" sec:authorize="hasRole('ADMIN')" th:href="@{/admin}">Admin</a>

            <!-- Utente autenticato NON admin -->
            <a class="btn btn-outline-brown" sec:authorize="isAuthenticated() and !hasRole('ADMIN')"
                th:href="@{/profile/reviews}">My account</a>


            <!-- Logout (solo autenticati) -->
            <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post" class="d-inline-block m-0"
                style="display:inline-block;margin:0;">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-brown">Logout</button>
            </form>

            <!-- **** Utenti ANONIMI **** -->
            <a class="btn btn-outline-brown" sec:authorize="isAnonymous()" th:href="@{/login}">Login</a>

            <a class="btn btn-brown" sec:authorize="isAnonymous()" th:href="@{/register}">Registrati</a>
        </nav>

    </div>
</header>

<!-- Frammento Header SOLO per home, con search al centro -->
<header class="site-header" th:fragment="siteHeaderWithSearch(q='')">
    <div class="container d-flex align-items-center justify-content-between hdr">
        <!-- Brand -->
        <a class="brand d-flex align-items-center" th:href="@{/}">
            <img class="brand-logo" th:src="@{/img/logo/logo-cata.png}" alt="SIW Catalogo" width="200" height="50"
                style="height:50px;width:auto;">
        </a>

        <!-- SEARCH CENTRALE (solo in questo fragment) -->
        <form class="hdr__search" th:action="@{/}" method="get" role="search" aria-label="Cerca prodotti">
            <input type="search" name="q" th:value="${q}" placeholder="Cerca prodottiâ€¦">
            <button type="submit" aria-label="Cerca">ðŸ”Ž</button>
        </form>

        <!-- Azioni -->
        <nav class="d-flex align-items-center"
            style="display:flex;flex-direction:row;align-items:center;gap:10px;white-space:nowrap;">
            <a class="btn btn-outline-brown" sec:authorize="hasRole('ADMIN')" th:href="@{/admin}">Admin</a>

            <a class="btn btn-outline-brown" sec:authorize="isAuthenticated() and !hasRole('ADMIN')"
                th:href="@{/account}">My account</a>

            <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post" class="d-inline-block m-0"
                style="display:inline-block;margin:0;">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-brown">Logout</button>
            </form>

            <a class="btn btn-outline-brown" sec:authorize="isAnonymous()" th:href="@{/login}">Login</a>
            <a class="btn btn-brown" sec:authorize="isAnonymous()" th:href="@{/register}">Registrati</a>
        </nav>
    </div>
</header>