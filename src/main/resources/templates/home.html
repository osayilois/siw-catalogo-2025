<!-- src/main/resources/templates/home.html -->
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">

<head>
    <meta charset="utf-8">
    <title>Home</title>

    <!-- Font titoli -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap + Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Stili -->
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/catalog.css}"> <!-- per le card -->
    <link rel="stylesheet" th:href="@{/css/home.css}">
</head>

<body>
    <!-- HEADER standard -->
    <div th:replace="~{fragments/header :: siteHeader}"></div>

    <!-- SEARCH sotto header -->
    <section class="search-row container mt-2">
        <form class="searchbar" th:action="@{/}" method="get" role="search" aria-label="Cerca prodotti">
            <i class="bi bi-search"></i>
            <input type="search" name="q" th:value="${q}" placeholder="Cerca prodotti…">
            <button class="searchbar__clear" type="button" aria-label="Pulisci"
                onclick="this.previousElementSibling.value=''; this.form.submit();">
                <i class="bi bi-x-lg"></i>
            </button>
        </form>
    </section>

    <main class="home container">
        <!-- HERO beige con slogan + CTA -->
        <section class="hero my-3">
            <div class="hero__grid">
                <div class="hero__text">
                    <h1 class="hero__title">Qualità essenziale, stile quotidiano.</h1>
                    <p class="hero__subtitle">Selezioni curate, linee pulite e prezzi trasparenti: tutto quello che
                        serve, senza il superfluo.</p>
                    <div class="hero__actions">
                        <a class="btn btn--pill btn--dark" th:href="@{/products}">Vai al catalogo</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- RISULTATI RICERCA (stessa griglia del catalogo) -->
        <section th:if="${q}">
            <h2 class="sec-title">Risultati per "<span th:text="${q}"></span>"</h2>
            <div th:if="${results} and ${#lists.size(results) > 0}"
                th:replace="~{catalog-cards :: productGrid(${results})}"></div>
            <p th:if="${results == null or #lists.isEmpty(results)}">Nessun risultato.</p>
        </section>

        <!-- APPENA AGGIUNTI (stessa griglia del catalogo) -->
        <section class="mt-3">
            <h2 class="sec-title">Appena aggiunti</h2>
            <div th:replace="~{catalog-cards :: productGrid(${prodottiRecenti})}"></div>
            <p th:if="${#lists.isEmpty(prodottiRecenti)}">Nessun prodotto disponibile (ancora!).</p>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>